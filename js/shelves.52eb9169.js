(function(t){function e(e){for(var o,c,i=e[0],s=e[1],l=e[2],f=0,d=[];f<i.length;f++)c=i[f],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(o=!1)}o&&(r.splice(e--,1),t=c(c.s=n[0]))}return t}var o={},a={shelves:0},r=[];function c(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=o,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(n,o,function(e){return t[e]}.bind(null,o));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=s;r.push([17,"chunk-vendors"]),n()})({0:function(t,e){},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},1495:function(t,e,n){},17:function(t,e,n){t.exports=n("9a73")},"1e67":function(t){t.exports=JSON.parse('{"type":"service_account","project_id":"effortless-pod-320511","private_key_id":"adab7b07a4f518710a7c00c3e31b8072c6847f38","private_key":"-----BEGIN PRIVATE KEY-----\\nMIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQCcWwHr6o4YpKoA\\nczTAqHOrOWBGag1fw1nTfepONWlxyhtYb6zvXO92XPPW95K9A9uCkmgJaH+WRMTQ\\n8xllHm3g8WRPipswMtMfpyKtQSpaV3MkAcFTbuSeTgaRAql1eKzHQPdckFtwemoI\\n6+jKLemk8XWznwiccMo057MJfOX18Xz12/Od/qu5FVkIzAzNHbX6Yw6YSaK5Cz45\\nGiQx6O7HY1fgWdoc1gT5jJENuJMzsYOoDZO/WLePJd21dY2Q9e2dOkcJRWZNajrE\\nUOfLojLiDxSnvsUi9wDmfwv4JcipYp8PsSd7trs4RMbMpTWjRteg7YEO7CEKhcdo\\npBUEWnc/AgMBAAECggEAA2tgptXQX4/HcANyFYmlNq3302mtQNZaJo80xMl2nW+7\\nvV3A9wG1IYVeh9JIdCxVmwE/l8UUvfhjaSrNshpwzo7EkHryoNE407WpTtkPRJue\\n0TOvK5pP+9cMRs6BXpyAd+1Hnom2CpiaCiYXXoGq6M4ysmrFPZ9alXjjv30wsNdV\\nfIufUQ0PjGV8etdvvRQ17NX3w7S3ZWAJdpfVX9wFh7BR1Quf7DxUFG9Q0ZTq3NSi\\npzLml3Emkay/ulAmT2bnok6Ge0cwtz3Bkf2Oo2HVbOFLxdlc99AU+f8wuMeora7v\\nzcDsfbdiVueHPjr8LRCgBnva8/fMZ9keGwALSkaJUQKBgQDbWsSJT+vyBwSTfeho\\nMp0TsezfGcA1eNTnY2pAcYOF6AqbhOkwUmt4jDgfPPMJ29QW+SfHDdcu02/koOE8\\nxfPg5Ev0b2sv/bBpxwEv8L5qRF0c8fswuS46jPRGW9AAc74Gw4zabFhPrAo67wGy\\nvOtdoXhHEije6UiNNECBhsd51QKBgQC2ee5sji0eLC5tWNPrPezrv9OCO9hGIngU\\nw/vjBujhPm15s70yNd0IBTF49kt7Mlk/DZOs53XfprEDej9x1czM89gyQjI4aQEm\\nFi5BDmh+k1Y06mXXS+HVmVNWtsyTIhB4iySlooCr1D/QPHUQg57MF2F8I05hE56x\\nZi3HOyECwwKBgGnR3/5eD/UybYK5uuSJhj16GEuIoLErGYqG6zsrh8eRqYxdEiG9\\noRsGigyH2rdm1Wo/yHC+vJBacCBbfE1VMdHMUNga6Bq+x9w/pNL70OBzGnhcRFG9\\nBBA6750BrdaJ/6JDtC+rFO9aj5TeuHMBsIn624ttt0nSQK3eB0B1RMYBAoGAaMhR\\nmfJ2hAn4yv+kCURxBNsNWI6G3ZczfzEfNjmkhpszgBwvO2LkvpNE2mIL6/14dBWW\\nxEXRURFGOmn7fqG3zcUEU6/haLUbXMSF4QOmC3ENoqsquduwHdjCm1uy05ZPAPld\\nnONYodLqpefhjQ8Xo7iVWRRpEKOUj+fNx8bzaMMCgYAe+73HNHEYAGyYGv7HmCEr\\n6QRwNpuKG8M7HgvBvCZkZ8pk6bgC3SMpvAQJ+FzAPWiwDguoxUJ+3l37RJEKr5//\\nMLL/+Y7r3vjXah2Ua1uhaM06XidZoYulWrvHdtMV31p2T6nm2ZXrC2e7/UKZw+jJ\\nBHCWj9ZgM9XP3cPjmGOpoA==\\n-----END PRIVATE KEY-----\\n","client_email":"googlesheet@effortless-pod-320511.iam.gserviceaccount.com","client_id":"107533034307099840238","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/googlesheet%40effortless-pod-320511.iam.gserviceaccount.com"}')},2:function(t,e){},3:function(t,e){},4:function(t,e){},4360:function(t,e,n){"use strict";n("ac1f"),n("841c");var o=n("2b0e"),a=n("2f62");o["default"].use(a["a"]);var r=new a["a"].Store({state:{search:"",cart:JSON.parse(localStorage.getItem("cart_data"))},mutations:{searchChange:function(t,e){t.search=e},cartChange:function(t){t.cart=JSON.parse(localStorage.getItem("cart_data"))}}});e["a"]=r},5:function(t,e){},"523f":function(t,e,n){"use strict";n("1495")},"5cc2":function(t,e,n){},6:function(t,e){},7:function(t,e){},"71c2":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"nav-wrapper"},[n("div",{staticClass:"nav-container"},[n("div",{staticClass:"nav-bt customer-service",on:{click:t.goShelves}},[t._v("商品上架")]),n("div",{staticClass:"spacer"}),n("div",{staticClass:"nav-bt register"},[t._v("註冊")]),n("div",{staticClass:"nav-bt login"},[t._v("登入")])])]),n("div",{staticClass:"search-wrapper"},[n("Row",{staticClass:"search-container",attrs:{align:"middle"}},[n("Col",{attrs:{span:"4"}},[n("div",{staticClass:"logo"},[t._v("好物購物")])]),n("Col",{attrs:{span:"16"}},[n("div",{staticClass:"search-bar"},[n("Input",{staticClass:"search-input",attrs:{placeholder:"全館滿千免運",size:"large"},model:{value:t.$store.state.search,callback:function(e){t.$set(t.$store.state,"search",e)},expression:"$store.state.search"}}),n("Button",{attrs:{icon:"md-search",size:"large"},on:{click:t.goSearch}})],1)]),n("Col",{staticClass:"d-flex justify-center align-center",attrs:{span:"4"}},[n("div",{staticClass:"shoppingCart-wrapper",on:{mouseover:function(e){t.cartListShow=!0},mouseleave:function(e){t.cartListShow=!1}}},[n("div",{staticClass:"shoppingCart"},[n("Icon",{attrs:{type:"md-cart",size:"36",color:"#F44355"}}),null!==t.$store.state.cart?n("div",{staticClass:"cart-amount"},[t._v(t._s(t.$store.state.cart.length>99?"99+":t.$store.state.cart.length))]):t._e()],1),!0===t.cartListShow?n("div",{staticClass:"cartList"},[n("List",[0===t.cartList.length?n("ListItem",[n("div",[t._v("購物車尚無商品")])]):t._e(),t._l(t.cartList,(function(e,o){return n("ListItem",{key:o},[n("div",[t._v(t._s(e.name))]),n("div",{staticStyle:{"flex-grow":"1"}}),n("div",[t._v("$ "+t._s(e.price))])])}))],2)],1):t._e()])])],1)],1)])},a=[],r=(n("159b"),n("b0c0"),n("7db0"),n("ac1f"),n("841c"),n("2ef0")),c=n.n(r),i=n("1e67"),s=n("d340"),l=s.GoogleSpreadsheet,u=new l("1pS3Hr0FrTqYO7KOFnEwv75O2-vyVaoLvCLCg_FgMOE0"),f={data:function(){return{commodity:[],cartListShow:!1}},created:function(){var t=this;u.useServiceAccountAuth(i).then((function(){u.loadInfo().then((function(){var e=u.sheetsByTitle["commodity"];e.getRows().then((function(e){var n=[];c.a.forEach(e,(function(t){n.push({id:t.id,name:t.name,price:t.price,amount:t.amount,delivery:t.delivery,content:t.content,img:t.img})})),t.commodity=n}))}))}))},computed:{cartList:function(){var t=this,e=[];return c.a.forEach(this.$store.state.cart,(function(n,o){if(!(o<3))return!1;e.push(c.a.find(t.commodity,{id:n.id}))})),e}},methods:{goSearch:function(){-1===window.location.href.indexOf("search")&&(window.location.href="./search?keyword=".concat(this.$store.state.search))},goShelves:function(){window.location.href="./shelves"}}},d=f,m=(n("ff39"),n("2877")),h=Object(m["a"])(d,o,a,!1,null,"0781cc05",null);e["a"]=h.exports},8:function(t,e){},9:function(t,e){},"9a73":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("my-header"),n("div",{staticClass:"main-wrapper"},[n("Form",{attrs:{"label-width":80}},[n("FormItem",{attrs:{label:"商品名稱"}},[n("div",[n("Input",{nativeOn:{input:function(e){return t.nameCheck.apply(null,arguments)}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),!1===t.check.name?n("span",{staticClass:"error-text input-errorText"},[t._v("請輸入商品名稱")]):t._e()],1)]),n("FormItem",{attrs:{label:"商品價格"}},[n("InputNumber",{attrs:{min:1},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),n("FormItem",{attrs:{label:"商品庫存"}},[n("InputNumber",{attrs:{width:"1200",min:1,max:999},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),n("FormItem",{attrs:{label:"配送方式"}},[n("div",[n("CheckboxGroup",{model:{value:t.form.delivery,callback:function(e){t.$set(t.form,"delivery",e)},expression:"form.delivery"}},[n("Checkbox",{attrs:{label:"sevenEleven"}},[t._v("全家")]),n("Checkbox",{attrs:{label:"familyMart"}},[t._v("7-11")]),n("Checkbox",{attrs:{label:"homeDelivery"}},[t._v("宅配")])],1),!1===t.check.delivery?n("span",{staticClass:"error-text input-errorText"},[t._v("請選擇配送方式")]):t._e()],1)]),n("FormItem",{attrs:{label:"商品內容"}},[n("div",[n("Input",{attrs:{type:"textarea",rows:10},nativeOn:{input:function(e){return t.contentCheck.apply(null,arguments)}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),!1===t.check.content?n("span",{staticClass:"error-text input-errorText"},[t._v("請輸入商品內容")]):t._e()],1)]),n("FormItem",{attrs:{label:"上傳照片"}},[n("div",[n("Button",{attrs:{icon:"ios-cloud-upload-outline"},on:{click:function(e){return t.$refs.fileUpload.click()}}},[t._v("上傳照片")]),n("input",{ref:"fileUpload",attrs:{type:"file",id:"file-upload",accept:"image/*",multiple:"multiple"},on:{change:function(e){return t.picturesUpload(e)}}})],1),n("div",[n("img",{staticClass:"preshow-img",attrs:{src:t.img.show,alt:""}})])]),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:t.dataCheck}},[t._v("上架商品")])],1)],1)],1)],1)},r=[],c=(n("b0c0"),n("159b"),n("d3b7"),n("9911"),n("2ef0")),i=n.n(c),s=n("71c2"),l=n("1e67"),u=n("d340"),f=u.GoogleSpreadsheet,d={components:{myHeader:s["a"]},data:function(){return{form:{name:"",price:1,amount:1,delivery:[],content:"",img:""},check:{name:"x",delivery:"x",content:"x",img:"x"},img:{show:"",upload:void 0}}},watch:{form:{handler:function(t){t.delivery.length>=1?this.check.delivery=!0:!0===this.check.delivery&&(this.check.delivery=!1)},deep:!0}},methods:{nameCheck:function(){""===this.form.name?this.check.name=!1:this.check.name=!0},contentCheck:function(){""===this.form.content?this.check.content=!1:this.check.content=!0},picturesUpload:function(t){var e=this,n=t.target.files;i.a.forEach(n,(function(t){var n=new FileReader;n.addEventListener("load",(function(t){e.img.show=t.target.result})),n.readAsDataURL(t),e.img.upload=t})),t.target.value=""},dataCheck:function(){var t=this;return""===this.form.name?(this.check.name=!1,this.$Message.error({background:!0,content:"請輸入商品名稱"}),!1):this.form.delivery.length<=0?(this.check.delivery=!1,this.$Message.error({background:!0,content:"請選擇配送方式"}),!1):""===this.form.content?(this.check.content=!1,this.$Message.error({background:!0,content:"請輸入商品內容"}),!1):void(void 0===this.img.upload?this.$Modal.confirm({title:"您尚未上傳圖片",content:"若繼續上架商品，商品圖片將以佔位圖片替代",maskClosable:!1,okText:"使用佔位圖片",cancelText:"上傳圖片",onOk:function(){t.form.img="https://placem.at/things",t.postStore()}}):this.postStore())},postStore:function(){var t=this,e=function(){t.$Loading.start();var e=new f("1pS3Hr0FrTqYO7KOFnEwv75O2-vyVaoLvCLCg_FgMOE0");e.useServiceAccountAuth(l).then((function(){e.loadInfo().then((function(){var n=e.sheetsByTitle["commodity"];n.getRows().then((function(e){var o="";i.a.forEach(t.form.delivery,(function(t){o+=",".concat(t)})),n.addRow({id:"a".concat(e.length),name:t.form.name,price:t.form.price,amount:t.form.amount,delivery:o,content:t.form.content,img:t.form.img}).then((function(){t.$Loading.finish(),t.$Message.success("上架成功"),Object.assign(t.$data,t.$options.data.call())}))}))}))}))};void 0===this.img.upload?e():this.uploadImg().then((function(){e()}))},uploadImg:function(){var t=this;return new Promise((function(e,n){var o=new FormData;o.append("image",t.img.upload),o.append("title",t.img.upload.name),o.append("description","Test"),o.append("album","tBmmUHf"),fetch("https://api.imgur.com/3/image",{method:"POST",headers:{Authorization:"Bearer f4d9e736d22f4d718bfe34bb35a54b4ace39abf1"},body:o}).then((function(e){switch(e.status){case 200:return e.json();default:throw e.text().then((function(e){console.log(e),t.$Message.error("上傳圖片發生錯誤 ".concat(e))})),Error()}})).then((function(n){console.log(n),t.form.img=n.data.link,e()})).catch((function(){n()}))}))}}},m=d,h=(n("523f"),n("2877")),p=Object(h["a"])(m,a,r,!1,null,"6fd01202",null),v=p.exports,g=n("4360"),w=n("f825"),b=n.n(w);n("f8ce"),n("5cc2");o["default"].config.productionTip=!1,o["default"].use(b.a),new o["default"]({store:g["a"],render:function(t){return t(v)}}).$mount("#app")},"9fed":function(t,e,n){},ff39:function(t,e,n){"use strict";n("9fed")}});
//# sourceMappingURL=shelves.52eb9169.js.map